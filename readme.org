#+TITLE: LectionaryData
* Background
The [[http://www.episcopalchurch.org/sites/default/files/downloads/book_of_common_prayer.pdf][Book of Common Prayer]] was a gift to me at a trying time of life. It did not tell me what to do, but gave me the pieces I needed to pursue the habits of prayer I'd longed for. It's like having a mentor in prayer, available to me at whatever crazy hour I decide to pray.

But the BCP is a bit daunting for its new users. Its completeness and flexibility leave lots of choices and lots of figuring out. Among the things to figure out is which pieces to use on which days. [fn::This is not about freedom: any piece can be used on any day. But there is a beauty and harmony to the cycle of the Church Year, a pattern that carries one through important ideas and encounters with one's faith. The Prayer Book, especially with its collects and readings, has all the pieces one needs to follow that pattern and benefit from it. As one grows used to it, it all makes sense and becomes easier to figure out. But for those just beginning this journey, it can be complicated to suss out all those details.]

Some of the details -- looking at you, movable feasts -- can be a little hairy. Others -- days getting pushed around by how Easter or Christmas fall -- are also mildly challenging. The church year is a hybrid, parts keyed to the Gregorian calendar (namely, Christmas and most other feasts) and parts not (namely Easter and its related feasts -- Easter being the chief celebration of the entire year).

I've long had a desire to make the BCP  more approachable for people. There are now several excellent resources out there to that end. Some of my favorites include:
-  [[https://lectionarypage.net/][The Lectionary Page]] (clean and intuitive)
-  [[https://dailyoffice.app/][The Daily Office App]] (super-complete; opinionated)
-  [[http://justus.anglican.org/resources/bcp/][Satucket]] ([[http://www.satucket.com/lectionary/index.htm][lectionary]])
-  [[http://www.episcopalchurch.org/sites/default/files/downloads/book_of_common_prayer.pdf][The BCP as a pdf from The Episcopal Church]]
-  [[http://lectionary.library.vanderbilt.edu/][RCL resources from the Vanderbilt Library]] (great spreadsheets, pdf's, etc.)

* Goals
So what more do I want? I want something super-simple for people to use. I'm about 2/3 of the way their with [[https://www.sharedprayers.net/][Shared Prayers]] ([[https://github.com/toddfoster/sharedprayers][src]]). But that's all hand-generated at present. I want to automate as much of Shared Prayers as possible, making it easy to provide a particular liturgy and eventually generating them with scripts.

Data stored in simple spreadsheets, csv, can be extracted by relatively simple scripts and transcoded into useful structures -- e.g., a simple file hierarchy for use by hugo, the software underlying Shared Prayers.

* Tasks
/Some of these tasks are oriented more toward [[https://github.com/toddfoster/sharedprayers][Shared Prayers]] than just Lectionary Parsing./
** DONE Begin by providing  collects for the church year
** DONE Provide titles of days
** DONE Provide prefaces (I'm tempted not to include them since they might be distracting when I get them wrong in liturgy!)
CLOSED: [2021-01-30 Sat 10:40]
*** DONE Week encoding
CLOSED: [2021-01-29 Fri 22:36]
[x] Choose a standard encoding by which to name each week of the church year uniquely.
*** DONE Include propers for major feasts (really, all propers in BCP)
CLOSED: [2021-01-29 Fri 22:37]
I've included all the ones I might regularly use. When celebrating particular saints, I usually use their specific collect from /Lesser Feast and Fasts/ or /Holy Women, Holy Men/. I'm not ready to enter all of those yet.
*** DONE Line up the collects for each week of the church year
CLOSED: [2021-01-29 Fri 17:51]
In a spreadsheet seems simplest
Leave out the " Amen." at the end. A script could easily add these back in. But I will note that formatting the *Amen* differently (as a congregational response) in hugo is simpler if I just leave it out of the plain, undecorated text of the collect.
*** DONE Write code to extract those collects in an automated way
CLOSED: [2021-01-29 Fri 17:51]
Onto the file system: e.g., ~collects/epiphany1.txt~
[x] Take another run at brushing up on Python; [[https://www.stavros.io/tutorials/python/][start here]] and get some cheat sheets
** TODO Line up Eucharistic lectionary against week codes
*** TODO How to handle optional readings?
*** TODO Year B
*** TODO Year C
*** TODO Year A
** DONE Provide introductions to texts
CLOSED: [2021-02-01 Mon 23:18]
Another spreadsheet, another hierarchy -- parse out Bible book or just key straight back to the church year code?
** DONE Parse out Psalms in useful ways that are easy to access
  - plaintex
  - markdown
  - markdown for responsive reading
CLOSED: [2021-02-01 Mon 23:18]
** TODO Get texts for lectionary
Code to scrape references into actual texts: ~rcl/epiphany1/firstlesson/lesson.txt~
Or spreadsheet with scraped texts from lectionarypage? -- Might smooth beginnings.
** TODO Algorithm to choose the corresponding week code for an arbitrary date
Depends on Easter & Christmas.
Added a column to calculate the dates for a specific year -- except movable feasts. This means I could generate the Principle Feasts, Sundays, and the three Holy Days that take precedence of a Sunday, all from the spreadsheet input. Or that algorithm could be extracted out into a script.
The benefit of doing this in the spreadsheet is one can look through the spreadsheet and verify (or even tweak) the dates before generating the pages. E.g., to move the movables by hand.
** TODO Line up daily lectionary against week codes
Vanderbilt spreadsheet is a great starting point.
Compare it against BCP.
[ ] How to account for optional readings?
[ ] Separate columns for Psalm, First, Second, Third readings
[ ] Code to extract references onto file system: ~rcl/epiphany1/firstlesson/reference.txt~
** TODO DailyLectionaryPage website?
Code to generate calendars like on LectionaryPage.net
** TODO Easy: suggested canticles according to BCP 144f.
~canticle/suggested/mp/monday.txt~
** TODO Algorithm to report feast days
Movable feasts will make this complex.
